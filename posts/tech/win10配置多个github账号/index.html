<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Win10配置多个Github账号 | Lorenwe Blog</title>
<meta name=keywords content><meta name=description content="一、为什么要配置多个Git账号
文章写于2021年的最后一天，最近闲来无事，想搞个导航网站，至于为什么要自己搞，纯属兴趣，既然是兴趣，就想着不要投入太大，整个省心省力的方案，github pages走起，问题就来了，一个github账号只能CANAME一个域名，我刚好挂了一个博客，其他的仓库要pages就只能在我的博客域名后面跟上仓库名这样访问，这很不程序员，所以我就又注册了一个github账号，现在在我的win10电脑上就要使用两个github账户了，当我在我的电脑上给新注册的仓库推送代码时就会出现当前用户没有权限访问，至此，就只能想办法配置好多个用户访问了，其实实际工作中也会遇见这个问题，比如自己肯定有github账户，开发公司项目的时候可能会有公司的gitlab账户或者其他代码仓库的账户，如果是使用http方式拉取代码还好，账户密码一输，记住密码也就没有后续问题了，但如果是使用ssh拉取代码就懵逼了，今天就是来解决这个问题的"><meta name=author content="Lorenwe"><link rel=canonical href=https://lorenwe.eu.org/posts/tech/win10%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AAgithub%E8%B4%A6%E5%8F%B7/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://lorenwe.eu.org/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lorenwe.eu.org/img/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://lorenwe.eu.org/img/favicon.ico><link rel=apple-touch-icon href=https://lorenwe.eu.org/img/favicon.ico><link rel=mask-icon href=https://lorenwe.eu.org/img/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://lorenwe.eu.org/posts/tech/win10%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AAgithub%E8%B4%A6%E5%8F%B7/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script src=https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta property="og:title" content="Win10配置多个Github账号"><meta property="og:description" content="一、为什么要配置多个Git账号
文章写于2021年的最后一天，最近闲来无事，想搞个导航网站，至于为什么要自己搞，纯属兴趣，既然是兴趣，就想着不要投入太大，整个省心省力的方案，github pages走起，问题就来了，一个github账号只能CANAME一个域名，我刚好挂了一个博客，其他的仓库要pages就只能在我的博客域名后面跟上仓库名这样访问，这很不程序员，所以我就又注册了一个github账号，现在在我的win10电脑上就要使用两个github账户了，当我在我的电脑上给新注册的仓库推送代码时就会出现当前用户没有权限访问，至此，就只能想办法配置好多个用户访问了，其实实际工作中也会遇见这个问题，比如自己肯定有github账户，开发公司项目的时候可能会有公司的gitlab账户或者其他代码仓库的账户，如果是使用http方式拉取代码还好，账户密码一输，记住密码也就没有后续问题了，但如果是使用ssh拉取代码就懵逼了，今天就是来解决这个问题的"><meta property="og:type" content="article"><meta property="og:url" content="https://lorenwe.eu.org/posts/tech/win10%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AAgithub%E8%B4%A6%E5%8F%B7/"><meta property="og:image" content="https://lorenwe.eu.org/posts/001/git-github.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-25T14:11:40+08:00"><meta property="article:modified_time" content="2024-09-25T14:11:40+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://lorenwe.eu.org/posts/001/git-github.webp"><meta name=twitter:title content="Win10配置多个Github账号"><meta name=twitter:description content="一、为什么要配置多个Git账号
文章写于2021年的最后一天，最近闲来无事，想搞个导航网站，至于为什么要自己搞，纯属兴趣，既然是兴趣，就想着不要投入太大，整个省心省力的方案，github pages走起，问题就来了，一个github账号只能CANAME一个域名，我刚好挂了一个博客，其他的仓库要pages就只能在我的博客域名后面跟上仓库名这样访问，这很不程序员，所以我就又注册了一个github账号，现在在我的win10电脑上就要使用两个github账户了，当我在我的电脑上给新注册的仓库推送代码时就会出现当前用户没有权限访问，至此，就只能想办法配置好多个用户访问了，其实实际工作中也会遇见这个问题，比如自己肯定有github账户，开发公司项目的时候可能会有公司的gitlab账户或者其他代码仓库的账户，如果是使用http方式拉取代码还好，账户密码一输，记住密码也就没有后续问题了，但如果是使用ssh拉取代码就懵逼了，今天就是来解决这个问题的"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚文章","item":"https://lorenwe.eu.org/posts/"},{"@type":"ListItem","position":2,"name":"👨🏻‍💻 技术","item":"https://lorenwe.eu.org/posts/tech/"},{"@type":"ListItem","position":3,"name":"Win10配置多个Github账号","item":"https://lorenwe.eu.org/posts/tech/win10%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AAgithub%E8%B4%A6%E5%8F%B7/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Win10配置多个Github账号","name":"Win10配置多个Github账号","description":"一、为什么要配置多个Git账号 文章写于2021年的最后一天，最近闲来无事，想搞个导航网站，至于为什么要自己搞，纯属兴趣，既然是兴趣，就想着不要投入太大，整个省心省力的方案，github pages走起，问题就来了，一个github账号只能CANAME一个域名，我刚好挂了一个博客，其他的仓库要pages就只能在我的博客域名后面跟上仓库名这样访问，这很不程序员，所以我就又注册了一个github账号，现在在我的win10电脑上就要使用两个github账户了，当我在我的电脑上给新注册的仓库推送代码时就会出现当前用户没有权限访问，至此，就只能想办法配置好多个用户访问了，其实实际工作中也会遇见这个问题，比如自己肯定有github账户，开发公司项目的时候可能会有公司的gitlab账户或者其他代码仓库的账户，如果是使用http方式拉取代码还好，账户密码一输，记住密码也就没有后续问题了，但如果是使用ssh拉取代码就懵逼了，今天就是来解决这个问题的\n","keywords":[""],"articleBody":"一、为什么要配置多个Git账号 文章写于2021年的最后一天，最近闲来无事，想搞个导航网站，至于为什么要自己搞，纯属兴趣，既然是兴趣，就想着不要投入太大，整个省心省力的方案，github pages走起，问题就来了，一个github账号只能CANAME一个域名，我刚好挂了一个博客，其他的仓库要pages就只能在我的博客域名后面跟上仓库名这样访问，这很不程序员，所以我就又注册了一个github账号，现在在我的win10电脑上就要使用两个github账户了，当我在我的电脑上给新注册的仓库推送代码时就会出现当前用户没有权限访问，至此，就只能想办法配置好多个用户访问了，其实实际工作中也会遇见这个问题，比如自己肯定有github账户，开发公司项目的时候可能会有公司的gitlab账户或者其他代码仓库的账户，如果是使用http方式拉取代码还好，账户密码一输，记住密码也就没有后续问题了，但如果是使用ssh拉取代码就懵逼了，今天就是来解决这个问题的\n二、初始化Git配置 默认我们都是已经使用了很久git，肯定做过很多设置了，为解决上面这个问题呢主要就是让git不再以一个用户身份对仓库进行更改，而是让它自动的选择对应的用户身份去操作代码仓库，只要用户身份和仓库对应上了，就没有权限问题啦，那就开干吧！\n1.去除全局用户配置 # 设置全局用户名 git config --golbal user.name \"XXX\" # 设置全局邮箱 git config --golbal user.email \"xxx@aa.com\" # 查看全局用户名 git config --global user.name # 查看全局邮箱 git config --global user.email # 查看全局密码 git config --global user.password 移除全局配置的用户信息\n# 移除全局配置账户 git config --global --unset user.name # 移除全局配置邮箱 git config --global --unset user.email # 移除全局密码 git config --global --unset user.password 如果上述命令执行有问题的话其实还可以自行更改git配置文件来实现\n如：找到C:\\Users\\Administrator\\.gitconfig文件，用文本编辑器打开找到[user]这一栏把所有的用户及邮箱信息删掉，就像这样：\n[user] [http] sslVerify = false 接下来运行命令来检查一下配置是否成功 git config --list\n$ git config --list core.symlinks=false core.autocrlf=true core.fscache=true color.diff=auto color.status=auto color.branch=auto color.interactive=true help.format=html rebase.autosquash=true http.sslbackend=openssl http.sslcainfo=C:/Program Files/Git/mingw64/ssl/certs/ca-bundle.crt credential.helper=manager http.sslverify=false 没有看到用户信息就算完成了\n2.生成密钥对 因为是要通过ssh来推拉仓库，故我们要先生成ssh的key，生成的命令也很简单\nssh-keygen -t rsa -C \"lorenwe@163.com\" 在这先声明一下自己的用户体系，以后后面搞混乱了，我原来自有一个github账户名是lorenwe，现在又注册了一个名为lorenwe2的账户（取名是个麻烦事），邮箱呢都是用的163的，所以两个账户的邮箱是lorenwe@163.com和lorenwe2@163.com，接下来就是不同的操作来啦\n注意上面那条命令 ssh-keygen -t rsa -C \"lorenwe@163.com\" 执行完后会在用户目录也就是C:\\Users\\Administrator 目录的 .ssh 目录里面生成两个文件名为 id_rsa 和 id_rsa.pub 的两个文件，如果在执行命令前就有的话可能你之前已经配置了ssh key，如果知道key对应配置哪个网站的话，可以删除从新配置，如果不支持重新配置的话就不建议删除了，\n可以使用这个命令生成指定文件名的密钥对\nssh-keygen -t rsa -C \"lorenwe@163.com\" -f id_rsa_lorenwe 现在我们不指定，也就是说生成了上面所说的两个文件，然后对这两个文件进行重命名，为了好区分我就直接在后面加上用户名了，现在文件结构如下：\n接下来就是为第二个用户生成 ssh key，重复以上操作即可\nAdministrator@PC-20210304RNJZ MINGW64 ~/.ssh $ ssh-keygen -t rsa -C \"lorenwe2@163.com\" -f id_rsa_lorenwe2 Generating public/private rsa key pair. Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in id_rsa_lorenwe2. Your public key has been saved in id_rsa_lorenwe2.pub. The key fingerprint is: SHA256:DwTCt/KL3YvvLEA9AFj/8BCGyRj/00EJLM4KXe+TCZk lorenwe2@163.com The key's randomart image is: +---[RSA 2048]----+ |.*o*=.o. | |o.=o=+o. | | +.o+B... | |. +.E*=o | |.. .o=++S | |. ..* o | | + + . | | . +o. | | .+=. | +----[SHA256]-----+ 注意使用 -f 指定生成文件名时需要让命令行处于在 .ssh 目录下，因为指定文件名后生成的文件就处于命令行所在的文件夹，在 .ssh 目录下省去了再去移动文件这一步，现在我们的文件目录结构为：\n至此准备工作完成了。\n三、配置Github的 SSH 用户 lorenwe 登录 GitHub，进入【Settings】-【SSH and GPG keys】，如下截图： 点击【New SSH key】按钮，进入新建SSH key页面，复制 id_rsa_lorenwe.pub 文件内容粘贴到大框框中，如下配图： Title随便取一个，我这取的是邮箱，这样配置完了就知道我这个密钥是给哪个用户配置的\n打开另外一个浏览器登入lorenwe2 账户重复一遍上面操作即可，至此GitHub配置完成了，同样的道理我们也可以配置其他站点的 ssh key，如 gitee 等 四、测试配置是否成功 可以执行下面的命令来测试密钥配置，需要注意的是测试命令需要自己指定要使用的是哪个key，因为在.ssh目录下面有两个key，默认是使用id_rsa来验证的\nssh -T git@github.com -i ~/.ssh/id_rsa_lorenwe Hi lorenwe! You've successfully authenticated, but GitHub does not provide shell access. ssh -T git@github.com -i ~/.ssh/id_rsa_lorenwe2 Hi lorenwe2! You've successfully authenticated, but GitHub does not provide shell access. 看到 successfully 就说明成功了\n五、Git配置不同站点使用不同用户 还是在.ssh目录下，创建一个文件名为 config 的文件，注意不带后缀，不是config.txt和config.ini，不带后缀就叫config，编辑器打开然后输入以下内容：\n# 配置user1 Host lorenwe.github.com HostName github.com IdentityFile C:\\\\Users\\\\Administrator\\\\.ssh\\\\id_rsa_lorenwe PreferredAuthentications publickey User lorenwe # 配置user2 Host lorenwe2.github.com HostName github.com IdentityFile C:\\\\Users\\\\Administrator\\\\.ssh\\\\id_rsa_lorenwe2 PreferredAuthentications publickey User lorenwe2 假如你还要配置公司内部的gitlab用户，那么可以按照下面的配置来修改\n# 配置user3 Host 192.168.12.5 Hostname 192.168.12.5 PreferredAuthentications publickey IdentityFile C:\\\\Users\\\\Administrator\\\\.ssh\\\\id_rsa_gitlab User gitlab_name 最后.ssh目录的文件结构如下图：\n六、使用需要注意的地方 在github上创建好一个仓库，创建好后如下：\n注意到 仓库 clone 路径 ssh的方式\ngit@github.com:lorenwe2/lorenwe2.git 使用以下命令clone会发现出错了，具体如下\nAdministrator@PC-20210304RNJZ MINGW64 ~/Desktop/test $ git clone git@github.com:lorenwe2/lorenwe2.git Cloning into 'lorenwe2'... git@github.com: Permission denied (publickey). fatal: Could not read from remote repository. Please make sure you have the correct access rights and the repository exists. 原因就是之前配置的config中是以下配置\n# 配置user1 Host lorenwe.github.com HostName github.com IdentityFile C:\\\\Users\\\\Administrator\\\\.ssh\\\\id_rsa_lorenwe PreferredAuthentications publickey User lorenwe # 配置user2 Host lorenwe2.github.com HostName github.com IdentityFile C:\\\\Users\\\\Administrator\\\\.ssh\\\\id_rsa_lorenwe2 PreferredAuthentications publickey User lorenwe2 两个用户的 HostName 都一样，git就从你给的clone链接里面拿到的host name也是github.com，这时候它就不知道要用哪个用户来clone了，解决办法很简单，把host再具体一点，如：\nAdministrator@PC-20210304RNJZ MINGW64 ~/Desktop/test $ git clone git@lorenwe2.github.com:lorenwe2/lorenwe2.git Cloning into 'lorenwe2'... warning: You appear to have cloned an empty repository. 上面就clone 成功了，只是clone了一个空仓库，我们只是在github.com前面加上了用户名，那就刚好对应上了上面config配置的Host，git 就知道要用哪个用户去clone仓库了，配置里面还定义的key的路径，那key也正确，所以就正常clone下来了，再测试一下推送功能吧\nAdministrator@PC-20210304RNJZ MINGW64 ~/Desktop/test $ cd lorenwe2/ Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 (master) $ git status On branch master No commits yet Untracked files: (use \"git add ...\" to include in what will be committed) test.txt nothing added to commit but untracked files present (use \"git add\" to track) Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 (master) $ git add -A Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 (master) $ git commit -m \"添加文件\" *** Please tell me who you are. Run git config --global user.email \"you@example.com\" git config --global user.name \"Your Name\" to set your account's default identity. Omit --global to set the identity only in this repository. fatal: unable to auto-detect email address (got 'Administrator@PC-20210304RNJZ.(none)') 可以发现命令执行到git commit时候就出错了，给的提示信息也很明显，没有设置全局用户名，不知道以什么用户身份去提交代码，我们不要按照他的说明来，他是要设置全局用户，但我们电脑是要使用多个用户的，所以设置全局用户显然不合适，可以使用以下命令为当前项目设置用户及邮箱\ngit config user.name \"lorenwe2\" git config user.email \"lorenwe2@163.com\" Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 (master) $ git config user.name \"lorenwe2\" Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 (master) $ git config user.email \"lorenwe2@163.com\" Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 (master) $ git commit -m \"添加文件\" [master (root-commit) 7bf22a5] 添加文件 1 file changed, 0 insertions(+), 0 deletions(-) create mode 100644 test.txt Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 (master) $ git push Enumerating objects: 3, done. Counting objects: 100% (3/3), done. Writing objects: 100% (3/3), 214 bytes | 214.00 KiB/s, done. Total 3 (delta 0), reused 0 (delta 0) To lorenwe2.github.com:lorenwe2/lorenwe2.git * [new branch] master -\u003e master 从上面可以看出，推送一切也都是ok的，假如不是新的仓库，而且原先还是使用HTTPS通信，则可以修改远程仓库地址\ngit remote rm origin git remote add origin git@lorenwe2.github.com:xxx/xxxxx.git 再为这个仓库配置用户名和邮箱，就也能对旧仓库修改推送方式，如不知道旧仓库是如何配置的，可以打开仓库目录里的.git文件夹找到config文件查看即可，如图：\n打开后可看到如下类似内容\n[core] repositoryformatversion = 0 filemode = false bare = false logallrefupdates = true symlinks = false ignorecase = true [remote \"origin\"] url = git@lorenwe2.github.com:lorenwe2/lorenwe2.git fetch = +refs/heads/*:refs/remotes/origin/* [branch \"master\"] remote = origin merge = refs/heads/master [user] name = lorenwe2 email = lorenwe2@163.com 至此 win10 配置多个git账户算是完成啦\n","wordCount":"3014","inLanguage":"zh","image":"https://lorenwe.eu.org/posts/001/git-github.webp","datePublished":"2024-09-25T14:11:40+08:00","dateModified":"2024-09-25T14:11:40+08:00","author":[{"@type":"Person","name":"Lorenwe"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://lorenwe.eu.org/posts/tech/win10%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AAgithub%E8%B4%A6%E5%8F%B7/"},"publisher":{"@type":"Organization","name":"Lorenwe Blog","logo":{"@type":"ImageObject","url":"https://lorenwe.eu.org/img/favicon.ico"}}}</script></head><body id=top><script>(function(){let e,t=new RegExp("(^| )change-themes=([^;]*)(;|$)");(e=document.cookie.match(t))||((new Date).getHours()>=19||(new Date).getHours()<6?(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")))})(),localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://lorenwe.eu.org/ accesskey=h title="Lorenwe Blog (Alt + H)"><img src=https://lorenwe.eu.org/img/kaola.png alt=logo aria-label=logo height=35>Lorenwe Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://lorenwe.eu.org/search title="🔍 搜索 (Alt + /)" accesskey=/><span>🔍 搜索</span></a></li><li><a href=https://lorenwe.eu.org/ title="🏠 主页"><span>🏠 主页</span></a></li><li><a href=https://lorenwe.eu.org/posts title="📚 文章"><span>📚 文章</span></a></li><li><a href=https://lorenwe.eu.org/tags title="🧩 标签"><span>🧩 标签</span></a></li><li><a href=https://lorenwe.eu.org/archives/ title="⏱️ 时间轴"><span>⏱️ 时间轴</span></a></li><li><a href=https://lorenwe.eu.org/about title="🙋🏻‍♂️ 关于"><span>🙋🏻‍♂️ 关于</span></a></li><li><a href=https://lorenwe.eu.org/links title="🤝 友链"><span>🤝 友链</span></a></li></ul></nav></header><main class="main page"><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}</style><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://lorenwe.eu.org/>🏠 主页</a>&nbsp;»&nbsp;<a href=https://lorenwe.eu.org/posts/>📚文章</a>&nbsp;»&nbsp;<a href=https://lorenwe.eu.org/posts/tech/>👨🏻‍💻 技术</a></div><h1 class=post-title>Win10配置多个Github账号</h1><div class=post-meta><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}.parent-post-meta{display:flex;flex-wrap:wrap;opacity:.8}</style><span class=parent-post-meta><span id=post_meta_style_1><span class="fa fa-calendar-check-o"></span>
<span>2024-09-25
&nbsp;&nbsp;
</span></span><span id=post_meta_style_3><span class="fa fa-file-word-o"></span>
<span>3014字
&nbsp;&nbsp;
</span></span><span id=post_meta_style_4><span class="fa fa-clock-o"></span>
<span>7分钟
&nbsp;&nbsp;
</span></span><span id=post_meta_style_5><span class="fa fa-user-o"></span>
<span>Lorenwe
&nbsp;&nbsp;
</span></span><span id=post_meta_style_6><span class="fa fa-tags" style=opacity:.8></span>
<span><span class=post-tags-meta></span></span></span></span><span style=opacity:.8><span id=post_meta_style_7>&nbsp;&nbsp;
<span class="fa fa-eye"></span>
<span><span id=busuanzi_container_page_pv><span id=busuanzi_value_page_pv></span></span>
&nbsp;&nbsp;
</span></span><span id=post_meta_style_8><span class="fa fa-commenting-o"></span>
<span><script src=https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js></script><script>let url=document.documentURI,dnsUrl="https://lorenwe.eu.org/",urlSplit=url.split(dnsUrl),finalUrl=urlSplit[1];finalUrl[0]!=="/"&&(finalUrl="/"+finalUrl),twikoo.getCommentsCount({envId:null,region:null,urls:[finalUrl],includeReply:!1}).then(function(e){let t=e[0].count;const n=document.getElementById("comment_count");n.innerText=t}).catch(function(e){console.error(e)})</script><span id=comment_count></span></span></span></span></div></header><figure class=entry-cover1><img style=zoom:50% loading=lazy src=https://lorenwe.eu.org/posts/001/git-github.webp alt></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e4%b8%80%e4%b8%ba%e4%bb%80%e4%b9%88%e8%a6%81%e9%85%8d%e7%bd%ae%e5%a4%9a%e4%b8%aagit%e8%b4%a6%e5%8f%b7 aria-label=一、为什么要配置多个Git账号>一、为什么要配置多个Git账号</a></li><li><a href=#%e4%ba%8c%e5%88%9d%e5%a7%8b%e5%8c%96git%e9%85%8d%e7%bd%ae aria-label=二、初始化Git配置>二、初始化Git配置</a><ul><ul><li><a href=#1%e5%8e%bb%e9%99%a4%e5%85%a8%e5%b1%80%e7%94%a8%e6%88%b7%e9%85%8d%e7%bd%ae aria-label=1.去除全局用户配置>1.去除全局用户配置</a></li><li><a href=#2%e7%94%9f%e6%88%90%e5%af%86%e9%92%a5%e5%af%b9 aria-label=2.生成密钥对>2.生成密钥对</a></li></ul></ul></li><li><a href=#%e4%b8%89%e9%85%8d%e7%bd%aegithub%e7%9a%84-ssh aria-label="三、配置Github的 SSH">三、配置Github的 SSH</a></li><li><a href=#%e5%9b%9b%e6%b5%8b%e8%af%95%e9%85%8d%e7%bd%ae%e6%98%af%e5%90%a6%e6%88%90%e5%8a%9f aria-label=四、测试配置是否成功>四、测试配置是否成功</a></li><li><a href=#%e4%ba%94git%e9%85%8d%e7%bd%ae%e4%b8%8d%e5%90%8c%e7%ab%99%e7%82%b9%e4%bd%bf%e7%94%a8%e4%b8%8d%e5%90%8c%e7%94%a8%e6%88%b7 aria-label=五、Git配置不同站点使用不同用户>五、Git配置不同站点使用不同用户</a></li><li><a href=#%e5%85%ad%e4%bd%bf%e7%94%a8%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e7%9a%84%e5%9c%b0%e6%96%b9 aria-label=六、使用需要注意的地方>六、使用需要注意的地方</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{elements&&(activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")}))},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h3 id=一为什么要配置多个git账号>一、为什么要配置多个Git账号<a hidden class=anchor aria-hidden=true href=#一为什么要配置多个git账号>#</a></h3><p>文章写于2021年的最后一天，最近闲来无事，想搞个导航网站，至于为什么要自己搞，纯属兴趣，既然是兴趣，就想着不要投入太大，整个省心省力的方案，github pages走起，问题就来了，一个github账号只能CANAME一个域名，我刚好挂了一个博客，其他的仓库要pages就只能在我的博客域名后面跟上仓库名这样访问，这很不程序员，所以我就又注册了一个github账号，现在在我的win10电脑上就要使用两个github账户了，当我在我的电脑上给新注册的仓库推送代码时就会出现当前用户没有权限访问，至此，就只能想办法配置好多个用户访问了，其实实际工作中也会遇见这个问题，比如自己肯定有github账户，开发公司项目的时候可能会有公司的gitlab账户或者其他代码仓库的账户，如果是使用http方式拉取代码还好，账户密码一输，记住密码也就没有后续问题了，但如果是使用ssh拉取代码就懵逼了，今天就是来解决这个问题的</p><h3 id=二初始化git配置>二、初始化Git配置<a hidden class=anchor aria-hidden=true href=#二初始化git配置>#</a></h3><p>默认我们都是已经使用了很久git，肯定做过很多设置了，为解决上面这个问题呢主要就是让git不再以一个用户身份对仓库进行更改，而是让它自动的选择对应的用户身份去操作代码仓库，只要用户身份和仓库对应上了，就没有权限问题啦，那就开干吧！</p><h5 id=1去除全局用户配置>1.去除全局用户配置<a hidden class=anchor aria-hidden=true href=#1去除全局用户配置>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 设置全局用户名</span>
</span></span><span style=display:flex><span>git config --golbal user.name <span style=color:#e6db74>&#34;XXX&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 设置全局邮箱</span>
</span></span><span style=display:flex><span>git config --golbal user.email <span style=color:#e6db74>&#34;xxx@aa.com&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看全局用户名</span>
</span></span><span style=display:flex><span>git config --global user.name
</span></span><span style=display:flex><span><span style=color:#75715e># 查看全局邮箱</span>
</span></span><span style=display:flex><span>git config --global user.email
</span></span><span style=display:flex><span><span style=color:#75715e># 查看全局密码</span>
</span></span><span style=display:flex><span>git config --global user.password
</span></span></code></pre></div><p>移除全局配置的用户信息</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 移除全局配置账户</span>
</span></span><span style=display:flex><span>git config --global --unset user.name
</span></span><span style=display:flex><span><span style=color:#75715e># 移除全局配置邮箱</span>
</span></span><span style=display:flex><span>git config --global --unset user.email
</span></span><span style=display:flex><span><span style=color:#75715e># 移除全局密码</span>
</span></span><span style=display:flex><span>git config --global --unset user.password
</span></span></code></pre></div><p>如果上述命令执行有问题的话其实还可以自行更改git配置文件来实现</p><p>如：找到<code>C:\Users\Administrator\.gitconfig</code>文件，用文本编辑器打开找到<code>[user]</code>这一栏把所有的用户及邮箱信息删掉，就像这样：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#66d9ef>[user]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[http]</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>sslVerify</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>false</span>
</span></span></code></pre></div><p>接下来运行命令来检查一下配置是否成功 <code>git config --list</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git config --list
</span></span><span style=display:flex><span>core.symlinks<span style=color:#f92672>=</span>false
</span></span><span style=display:flex><span>core.autocrlf<span style=color:#f92672>=</span>true
</span></span><span style=display:flex><span>core.fscache<span style=color:#f92672>=</span>true
</span></span><span style=display:flex><span>color.diff<span style=color:#f92672>=</span>auto
</span></span><span style=display:flex><span>color.status<span style=color:#f92672>=</span>auto
</span></span><span style=display:flex><span>color.branch<span style=color:#f92672>=</span>auto
</span></span><span style=display:flex><span>color.interactive<span style=color:#f92672>=</span>true
</span></span><span style=display:flex><span>help.format<span style=color:#f92672>=</span>html
</span></span><span style=display:flex><span>rebase.autosquash<span style=color:#f92672>=</span>true
</span></span><span style=display:flex><span>http.sslbackend<span style=color:#f92672>=</span>openssl
</span></span><span style=display:flex><span>http.sslcainfo<span style=color:#f92672>=</span>C:/Program Files/Git/mingw64/ssl/certs/ca-bundle.crt
</span></span><span style=display:flex><span>credential.helper<span style=color:#f92672>=</span>manager
</span></span><span style=display:flex><span>http.sslverify<span style=color:#f92672>=</span>false
</span></span></code></pre></div><p>没有看到用户信息就算完成了</p><h5 id=2生成密钥对>2.生成密钥对<a hidden class=anchor aria-hidden=true href=#2生成密钥对>#</a></h5><p>因为是要通过ssh来推拉仓库，故我们要先生成ssh的key，生成的命令也很简单</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh-keygen -t rsa -C <span style=color:#e6db74>&#34;lorenwe@163.com&#34;</span>
</span></span></code></pre></div><p>在这先声明一下自己的用户体系，以后后面搞混乱了，我原来自有一个github账户名是lorenwe，现在又注册了一个名为lorenwe2的账户（取名是个麻烦事），邮箱呢都是用的163的，所以两个账户的邮箱是lorenwe@163.com和lorenwe2@163.com，接下来就是不同的操作来啦</p><p>注意上面那条命令 <code>ssh-keygen -t rsa -C "lorenwe@163.com"</code> 执行完后会在用户目录也就是<code>C:\Users\Administrator</code> 目录的 <code>.ssh</code> 目录里面生成两个文件名为 id_rsa 和 id_rsa.pub 的两个文件，如果在执行命令前就有的话可能你之前已经配置了ssh key，如果知道key对应配置哪个网站的话，可以删除从新配置，如果不支持重新配置的话就不建议删除了，</p><p>可以使用这个命令生成指定文件名的密钥对</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh-keygen -t rsa -C <span style=color:#e6db74>&#34;lorenwe@163.com&#34;</span> -f id_rsa_lorenwe
</span></span></code></pre></div><p>现在我们不指定，也就是说生成了上面所说的两个文件，然后对这两个文件进行重命名，为了好区分我就直接在后面加上用户名了，现在文件结构如下：</p><p><img loading=lazy src=/posts/001/ssh_lorenwe.png alt=ssh_lorenwe.png></p><p>接下来就是为第二个用户生成 ssh key，重复以上操作即可</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Administrator@PC-20210304RNJZ MINGW64 ~/.ssh
</span></span><span style=display:flex><span>$ ssh-keygen -t rsa -C <span style=color:#e6db74>&#34;lorenwe2@163.com&#34;</span> -f id_rsa_lorenwe2
</span></span><span style=display:flex><span>Generating public/private rsa key pair.
</span></span><span style=display:flex><span>Enter passphrase <span style=color:#f92672>(</span>empty <span style=color:#66d9ef>for</span> no passphrase<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>Enter same passphrase again:
</span></span><span style=display:flex><span>Your identification has been saved in id_rsa_lorenwe2.
</span></span><span style=display:flex><span>Your public key has been saved in id_rsa_lorenwe2.pub.
</span></span><span style=display:flex><span>The key fingerprint is:
</span></span><span style=display:flex><span>SHA256:DwTCt/KL3YvvLEA9AFj/8BCGyRj/00EJLM4KXe+TCZk lorenwe2@163.com
</span></span><span style=display:flex><span>The key<span style=color:#960050;background-color:#1e0010>&#39;</span>s randomart image is:
</span></span><span style=display:flex><span>+---<span style=color:#f92672>[</span>RSA 2048<span style=color:#f92672>]</span>----+
</span></span><span style=display:flex><span>|.*o*<span style=color:#f92672>=</span>.o.         |
</span></span><span style=display:flex><span>|o.<span style=color:#f92672>=</span>o<span style=color:#f92672>=</span>+o.         |
</span></span><span style=display:flex><span>| +.o+B...        |
</span></span><span style=display:flex><span>|. +.E*<span style=color:#f92672>=</span>o         |
</span></span><span style=display:flex><span>|.. .o<span style=color:#f92672>=</span>++S        |
</span></span><span style=display:flex><span>|.   ..*  o       |
</span></span><span style=display:flex><span>|     + +  .      |
</span></span><span style=display:flex><span>|    . +o.        |
</span></span><span style=display:flex><span>|      .+<span style=color:#f92672>=</span>.       |
</span></span><span style=display:flex><span>+----<span style=color:#f92672>[</span>SHA256<span style=color:#f92672>]</span>-----+
</span></span></code></pre></div><p>注意使用 <code>-f</code> 指定生成文件名时需要让命令行处于在 .ssh 目录下，因为指定文件名后生成的文件就处于命令行所在的文件夹，在 .ssh 目录下省去了再去移动文件这一步，现在我们的文件目录结构为：</p><p><img loading=lazy src=/posts/001/ssh_lorenwe2.png alt=ssh_lorenwe2.png></p><p>至此准备工作完成了。</p><h3 id=三配置github的-ssh>三、配置Github的 SSH<a hidden class=anchor aria-hidden=true href=#三配置github的-ssh>#</a></h3><ol><li>用户 lorenwe 登录 GitHub，进入【Settings】-【SSH and GPG keys】，如下截图：</li></ol><p><img loading=lazy src=/posts/001/github_step1.png alt=github_step1.png></p><ol start=2><li>点击【New SSH key】按钮，进入新建SSH key页面，复制 id_rsa_lorenwe.pub 文件内容粘贴到大框框中，如下配图：</li></ol><p><img loading=lazy src=/posts/001/github_step2.png alt=github_step2.png></p><p>Title随便取一个，我这取的是邮箱，这样配置完了就知道我这个密钥是给哪个用户配置的</p><ol start=3><li>打开另外一个浏览器登入lorenwe2 账户重复一遍上面操作即可，至此GitHub配置完成了，同样的道理我们也可以配置其他站点的 ssh key，如 gitee 等</li></ol><h3 id=四测试配置是否成功>四、测试配置是否成功<a hidden class=anchor aria-hidden=true href=#四测试配置是否成功>#</a></h3><p>可以执行下面的命令来测试密钥配置，需要注意的是测试命令需要自己指定要使用的是哪个key，因为在.ssh目录下面有两个key，默认是使用id_rsa来验证的</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh -T git@github.com -i ~/.ssh/id_rsa_lorenwe
</span></span><span style=display:flex><span>Hi lorenwe! You<span style=color:#e6db74>&#39;ve successfully authenticated, but GitHub does not provide shell access.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ssh -T git@github.com -i ~/.ssh/id_rsa_lorenwe2
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Hi lorenwe2! You&#39;</span>ve successfully authenticated, but GitHub does not provide shell access.
</span></span></code></pre></div><p>看到 successfully 就说明成功了</p><h3 id=五git配置不同站点使用不同用户>五、Git配置不同站点使用不同用户<a hidden class=anchor aria-hidden=true href=#五git配置不同站点使用不同用户>#</a></h3><p>还是在.ssh目录下，创建一个文件名为 config 的文件，注意不带后缀，不是config.txt和config.ini，不带后缀就叫config，编辑器打开然后输入以下内容：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#75715e># 配置user1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Host lorenwe.github.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>HostName github.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>IdentityFile C:\\Users\\Administrator\\.ssh\\id_rsa_lorenwe</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PreferredAuthentications publickey</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>User lorenwe</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 配置user2</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Host lorenwe2.github.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>HostName github.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>IdentityFile C:\\Users\\Administrator\\.ssh\\id_rsa_lorenwe2</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PreferredAuthentications publickey</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>User lorenwe2</span>
</span></span></code></pre></div><p>假如你还要配置公司内部的gitlab用户，那么可以按照下面的配置来修改</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#75715e># 配置user3</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Host 192.168.12.5</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Hostname 192.168.12.5</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PreferredAuthentications publickey</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>IdentityFile C:\\Users\\Administrator\\.ssh\\id_rsa_gitlab</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>User gitlab_name</span>
</span></span></code></pre></div><p>最后.ssh目录的文件结构如下图：</p><p><img loading=lazy src=/posts/001/ssh_list.png alt=ssh_list.png></p><h3 id=六使用需要注意的地方>六、使用需要注意的地方<a hidden class=anchor aria-hidden=true href=#六使用需要注意的地方>#</a></h3><p>在github上创建好一个仓库，创建好后如下：</p><p><img loading=lazy src=/posts/001/github6.png alt=github6.png></p><p>注意到 仓库 clone 路径 ssh的方式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>git@github.com:lorenwe2/lorenwe2.git</span>
</span></span></code></pre></div><p>使用以下命令clone会发现出错了，具体如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test
</span></span><span style=display:flex><span>$ git clone git@github.com:lorenwe2/lorenwe2.git
</span></span><span style=display:flex><span>Cloning into <span style=color:#e6db74>&#39;lorenwe2&#39;</span>...
</span></span><span style=display:flex><span>git@github.com: Permission denied <span style=color:#f92672>(</span>publickey<span style=color:#f92672>)</span>.
</span></span><span style=display:flex><span>fatal: Could not read from remote repository.
</span></span><span style=display:flex><span>Please make sure you have the correct access rights
</span></span><span style=display:flex><span>and the repository exists.
</span></span></code></pre></div><p>原因就是之前配置的config中是以下配置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#75715e># 配置user1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Host lorenwe.github.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>HostName github.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>IdentityFile C:\\Users\\Administrator\\.ssh\\id_rsa_lorenwe</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PreferredAuthentications publickey</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>User lorenwe</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 配置user2</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Host lorenwe2.github.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>HostName github.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>IdentityFile C:\\Users\\Administrator\\.ssh\\id_rsa_lorenwe2</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PreferredAuthentications publickey</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>User lorenwe2</span>
</span></span></code></pre></div><p>两个用户的 HostName 都一样，git就从你给的clone链接里面拿到的host name也是github.com，这时候它就不知道要用哪个用户来clone了，解决办法很简单，把host再具体一点，如：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test
</span></span><span style=display:flex><span>$ git clone git@lorenwe2.github.com:lorenwe2/lorenwe2.git
</span></span><span style=display:flex><span>Cloning into <span style=color:#e6db74>&#39;lorenwe2&#39;</span>...
</span></span><span style=display:flex><span>warning: You appear to have cloned an empty repository.
</span></span></code></pre></div><p>上面就clone 成功了，只是clone了一个空仓库，我们只是在github.com前面加上了用户名，那就刚好对应上了上面config配置的Host，git 就知道要用哪个用户去clone仓库了，配置里面还定义的key的路径，那key也正确，所以就正常clone下来了，再测试一下推送功能吧</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test
</span></span><span style=display:flex><span>$ cd lorenwe2/
</span></span><span style=display:flex><span>Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 <span style=color:#f92672>(</span>master<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>$ git status
</span></span><span style=display:flex><span>On branch master
</span></span><span style=display:flex><span>No commits yet
</span></span><span style=display:flex><span>Untracked files:
</span></span><span style=display:flex><span>  <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git add &lt;file&gt;...&#34;</span> to include in what will be committed<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        test.txt
</span></span><span style=display:flex><span>nothing added to commit but untracked files present <span style=color:#f92672>(</span>use <span style=color:#e6db74>&#34;git add&#34;</span> to track<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 <span style=color:#f92672>(</span>master<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>$ git add -A
</span></span><span style=display:flex><span>Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 <span style=color:#f92672>(</span>master<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>$ git commit -m <span style=color:#e6db74>&#34;添加文件&#34;</span>
</span></span><span style=display:flex><span>*** Please tell me who you are.
</span></span><span style=display:flex><span>Run
</span></span><span style=display:flex><span>  git config --global user.email <span style=color:#e6db74>&#34;you@example.com&#34;</span>
</span></span><span style=display:flex><span>  git config --global user.name <span style=color:#e6db74>&#34;Your Name&#34;</span>
</span></span><span style=display:flex><span>to set your account<span style=color:#e6db74>&#39;s default identity.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Omit --global to set the identity only in this repository.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fatal: unable to auto-detect email address (got &#39;</span>Administrator@PC-20210304RNJZ.<span style=color:#f92672>(</span>none<span style=color:#f92672>)</span><span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><p>可以发现命令执行到git commit时候就出错了，给的提示信息也很明显，没有设置全局用户名，不知道以什么用户身份去提交代码，我们不要按照他的说明来，他是要设置全局用户，但我们电脑是要使用多个用户的，所以设置全局用户显然不合适，可以使用以下命令为当前项目设置用户及邮箱</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git config user.name <span style=color:#e6db74>&#34;lorenwe2&#34;</span>
</span></span><span style=display:flex><span>git config user.email <span style=color:#e6db74>&#34;lorenwe2@163.com&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 <span style=color:#f92672>(</span>master<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>$ git config user.name <span style=color:#e6db74>&#34;lorenwe2&#34;</span>
</span></span><span style=display:flex><span>Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 <span style=color:#f92672>(</span>master<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>$ git config user.email <span style=color:#e6db74>&#34;lorenwe2@163.com&#34;</span>
</span></span><span style=display:flex><span>Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 <span style=color:#f92672>(</span>master<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>$ git commit -m <span style=color:#e6db74>&#34;添加文件&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>master <span style=color:#f92672>(</span>root-commit<span style=color:#f92672>)</span> 7bf22a5<span style=color:#f92672>]</span> 添加文件
</span></span><span style=display:flex><span> <span style=color:#ae81ff>1</span> file changed, <span style=color:#ae81ff>0</span> insertions<span style=color:#f92672>(</span>+<span style=color:#f92672>)</span>, <span style=color:#ae81ff>0</span> deletions<span style=color:#f92672>(</span>-<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span> create mode <span style=color:#ae81ff>100644</span> test.txt
</span></span><span style=display:flex><span>Administrator@PC-20210304RNJZ MINGW64 ~/Desktop/test/lorenwe2 <span style=color:#f92672>(</span>master<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>$ git push
</span></span><span style=display:flex><span>Enumerating objects: 3, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>Counting objects: 100% <span style=color:#f92672>(</span>3/3<span style=color:#f92672>)</span>, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>Writing objects: 100% <span style=color:#f92672>(</span>3/3<span style=color:#f92672>)</span>, <span style=color:#ae81ff>214</span> bytes | 214.00 KiB/s, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>Total <span style=color:#ae81ff>3</span> <span style=color:#f92672>(</span>delta 0<span style=color:#f92672>)</span>, reused <span style=color:#ae81ff>0</span> <span style=color:#f92672>(</span>delta 0<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>To lorenwe2.github.com:lorenwe2/lorenwe2.git
</span></span><span style=display:flex><span> * <span style=color:#f92672>[</span>new branch<span style=color:#f92672>]</span>      master -&gt; master
</span></span></code></pre></div><p>从上面可以看出，推送一切也都是ok的，假如不是新的仓库，而且原先还是使用HTTPS通信，则可以修改远程仓库地址</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git remote rm origin
</span></span><span style=display:flex><span>git remote add origin git@lorenwe2.github.com:xxx/xxxxx.git
</span></span></code></pre></div><p>再为这个仓库配置用户名和邮箱，就也能对旧仓库修改推送方式，如不知道旧仓库是如何配置的，可以打开仓库目录里的.git文件夹找到config文件查看即可，如图：</p><p><img loading=lazy src=/posts/001/lorenwe2_config.png alt=lorenwe2_config.png></p><p>打开后可看到如下类似内容</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#66d9ef>[core]</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>repositoryformatversion</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>0
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	filemode = false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	bare = false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	logallrefupdates = true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	symlinks = false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	ignorecase = true</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[remote &#34;origin&#34;]</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>git@lorenwe2.github.com:lorenwe2/lorenwe2.git
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	fetch = +refs/heads/*:refs/remotes/origin/*</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[branch &#34;master&#34;]</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>remote</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>origin
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	merge = refs/heads/master</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[user]</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>lorenwe2
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	email = lorenwe2@163.com</span>
</span></span></code></pre></div><p>至此 win10 配置多个git账户算是完成啦</p></div><div class=post-reward><div style=padding:0;margin:0;width:100%;font-size:16px;text-align:center><div id=QR style=opacity:0><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=https://lorenwe.eu.org/img/wechat_pay.png alt=wechat_pay></a><p>微信</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=https://lorenwe.eu.org/img/alipay.png alt=alipay></a><p>支付宝</p></div></div><button id=rewardButton onclick='var qr=document.getElementById("QR");qr.style.opacity==="0"?qr.style.opacity="1":qr.style.opacity="0"'>
<span>🧧 鼓励</span></button></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://lorenwe.eu.org/posts/tech/php%E6%9E%84%E9%80%A0form-data%E6%A0%BC%E5%BC%8Fpost%E8%AF%B7%E6%B1%82%E4%BD%93%E7%9A%84%E6%96%B9%E6%B3%95/><span class=title>« 上一页</span><br><span>PHP构造multipart/form-data格式POST请求体的方法</span>
</a><a class=next href=https://lorenwe.eu.org/posts/blog/blog/><span class=title>下一页 »</span><br><span>Blog</span></a></nav></footer></div><style>.comments_details summary::marker{font-size:20px;content:'👉展开评论';color:var(--content)}.comments_details[open] summary::marker{font-size:20px;content:'👇关闭评论';color:var(--content)}</style><div><details class=comments_details><summary style="cursor:pointer;margin:50px 0 20px;width:130px"><span style=font-size:20px;color:var(--content)>...</span></summary><div id=tcomment></div></details><script src=https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js></script><script>twikoo.init({envId:null,el:"#tcomment",lang:"zh-CN",region:null,path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
<span id=read_progress></span>
</span></a><script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>200||document.documentElement.scrollTop>200?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{(function(){document.cookie="change-themes="+escape("false")})(),document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.body.addEventListener("copy",function(e){if(window.getSelection().toString()&&window.getSelection().toString().length>50){let t=e.clipboardData||window.clipboardData;if(t){e.preventDefault();let n=window.getSelection().toString()+`\r

————————————————\r
版权声明：本文为「Lorenwe Blog」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\r
原文链接：`+location.href,s=window.getSelection().toString()+`\r

————————————————\r
版权声明：本文为「Lorenwe Blog」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\r
原文链接：`+location.href;t.setData("text/html",n),t.setData("text/plain",s)}}})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="复制";function i(){t.innerText="已复制！",setTimeout(()=>{t.innerText="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){let t=e.textContent+`\r
————————————————\r
版权声明：本文为「Lorenwe Blog」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\r
原文链接：`+location.href;navigator.clipboard.writeText(t),i();return}const n=document.createRange();n.selectNodeContents(e);const s=window.getSelection();s.removeAllRanges(),s.addRange(n);try{document.execCommand("copy"),i()}catch{}s.removeRange(n)});let l=e.className.replaceAll("language-",""),n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),o=document.createElement("div");o.innerText=l,n.setAttribute("class","mac-tool"),a.setAttribute("class","mac bb1"),r.setAttribute("class","mac bb2"),c.setAttribute("class","mac bb3"),o.setAttribute("class","language-type"),n.appendChild(a),n.appendChild(r),n.appendChild(c),n.appendChild(o),s.classList.contains("highlight")?(s.appendChild(t),s.appendChild(n)):s.parentNode.firstChild==s||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?(e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t),s.appendChild(n)):(e.parentNode.appendChild(t),s.appendChild(n)))})</script></body></html>